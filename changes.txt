--- Changes for Commit 7424f2a1a56b9ee0147bc3f03a00bbe0c8986640 in L33Z22L11/blog-v3 ---

File 1/14: app/app.config.ts (Status: modified)
-----------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -15,7 +15,7 @@ export default defineAppConfig({ ---
  Line 15/15: CONTEXT -> 'æ‚è°ˆ: { icon: 'ph:chat-bold', color: '#3ba' },'
  Line 16/16: CONTEXT -> 'ç”Ÿæ´»: { icon: 'ph:shooting-star-bold', color: '#f77' },'
  Line 17/17: CONTEXT -> 'ä»£ç : { icon: 'ph:code-bold', color: '#77f' },'
  Line 18: DELETED -> 'æœªåˆ†ç±»: { icon: 'ph:folder-dotted-bold' },'
  Line 18: ADDED -> '[blogConfig.content.defaultCategory]: { icon: 'ph:folder-dotted-bold' },'
  Line 19/19: CONTEXT -> '},'
  Line 20/20: CONTEXT -> 'defaultCategoryIcon: 'ph:folder-bold','
  Line 21/21: CONTEXT -> '/** åˆ†ç±»æ’åºæ–¹å¼ï¼Œé”®ä¸ºæ’åºå­—æ®µï¼Œå€¼ä¸ºæ˜¾ç¤ºåç§° */'

================================================================================

File 2/14: app/components/ZWidget.vue (Status: modified)
--------------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -10,16 +10,16 @@ defineProps<{ ---
  Line 10/10: CONTEXT -> ''
  Line 11/11: CONTEXT -> '<template>'
  Line 12/12: CONTEXT -> '<section class="widget" :class="{ dim }">'
  Line 13: DELETED -> '<header class="widget-title text-creative">'
  Line 13: ADDED -> '<hgroup class="widget-title text-creative">'
  Line 14/14: CONTEXT -> '<slot name="title">'
  Line 15/15: CONTEXT -> '{{ title }}'
  Line 16/16: CONTEXT -> '</slot>'
  Line 17: DELETED -> '</header>'
  Line 17: ADDED -> '</hgroup>'
  Line 18/18: CONTEXT -> ''
  Line 19: DELETED -> '<main class="widget-body" :class="{ 'widget-card': card, 'with-bg': bgImg }">'
  Line 19: ADDED -> '<div class="widget-body" :class="{ 'widget-card': card, 'with-bg': bgImg }">'
  Line 20/20: CONTEXT -> '<NuxtImg v-if="bgImg" class="bg-img" :class="{ 'bg-right': bgRight }" :src="bgImg" alt="" />'
  Line 21/21: CONTEXT -> '<slot />'
  Line 22: DELETED -> '</main>'
  Line 22: ADDED -> '</div>'
  Line 23/23: CONTEXT -> '</section>'
  Line 24/24: CONTEXT -> '</template>'
  Line 25/25: CONTEXT -> ''
  --- Diff Hunk: @@ -31,23 +31,6 @@ defineProps<{ ---
  Line 31/31: CONTEXT -> 'margin-top: 1rem;'
  Line 32/32: CONTEXT -> '}'
  Line 33/33: CONTEXT -> ''
  Line 34: DELETED -> '> .widget-title {'
  Line 35: DELETED -> 'display: flex;'
  Line 36: DELETED -> 'align-items: center;'
  Line 37: DELETED -> 'justify-content: space-between;'
  Line 38: DELETED -> 'gap: 0.5rem;'
  Line 39: DELETED -> 'margin: 0.5rem;'
  Line 40: DELETED -> 'color: var(--c-text-2);'
  Line 41: DELETED -> ''
  Line 42: DELETED -> 'a {'
  Line 43: DELETED -> 'transition: color 0.2s;'
  Line 44: DELETED -> '}'
  Line 45: DELETED -> ''
  Line 46: DELETED -> '> [onclick]:hover, > [href]:hover {'
  Line 47: DELETED -> 'color: var(--c-primary);'
  Line 48: DELETED -> '}'
  Line 49: DELETED -> '}'
  Line 50: DELETED -> ''
  Line 51/34: CONTEXT -> '&.dim {'
  Line 52/35: CONTEXT -> 'opacity: 0.3;'
  Line 53/36: CONTEXT -> 'transition: opacity 0.2s;'
  --- Diff Hunk: @@ -56,8 +39,27 @@ defineProps<{ ---
  Line 56/39: CONTEXT -> 'opacity: 1;'
  Line 57/40: CONTEXT -> '}'
  Line 58/41: CONTEXT -> '}'
  Line 42: ADDED -> '}'
  Line 43: ADDED -> ''
  Line 44: ADDED -> '.widget-title {'
  Line 45: ADDED -> 'display: flex;'
  Line 46: ADDED -> 'align-items: center;'
  Line 47: ADDED -> 'justify-content: space-between;'
  Line 48: ADDED -> 'gap: 0.5rem;'
  Line 49: ADDED -> 'margin: 0.5rem;'
  Line 50: ADDED -> 'color: var(--c-text-2);'
  Line 51: ADDED -> ''
  Line 52: ADDED -> 'a {'
  Line 53: ADDED -> 'transition: color 0.2s;'
  Line 54: ADDED -> '}'
  Line 55: ADDED -> ''
  Line 56: ADDED -> '> [onclick]:hover, > [href]:hover {'
  Line 57: ADDED -> 'color: var(--c-primary);'
  Line 58: ADDED -> '}'
  Line 59: ADDED -> '}'
  Line 59/60: CONTEXT -> ''
  Line 60: DELETED -> '> .widget-body {'
  Line 61: ADDED -> '.widget-body {'
  Line 62: ADDED -> '&.with-bg {'
  Line 61/63: CONTEXT -> 'position: relative;'
  Line 62/64: CONTEXT -> 'overflow: hidden;'
  Line 63/65: CONTEXT -> 'overflow: clip;'
  --- Diff Hunk: @@ -81,7 +83,7 @@ defineProps<{ ---
  Line 81/83: CONTEXT -> '}'
  Line 82/84: CONTEXT -> '}'
  Line 83/85: CONTEXT -> ''
  Line 84: DELETED -> '> .widget-card {'
  Line 86: ADDED -> '&.widget-card {'
  Line 85/87: CONTEXT -> 'padding: 0.5rem 0.8rem;'
  Line 86/88: CONTEXT -> 'border-radius: 0.8rem;'
  Line 87/89: CONTEXT -> 'background-color: var(--c-bg-2);'

================================================================================

File 3/14: app/components/post/PostHeader.vue (Status: modified)
----------------------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -18,7 +18,7 @@ const { copy, copied } = useCopy(shareText) ---
  Line 18/18: CONTEXT -> ''
  Line 19/19: CONTEXT -> '<template>'
  Line 20/20: CONTEXT -> '<!-- ğŸ’©å¤¸å…‹æµè§ˆå™¨ï¼Œæ¡Œé¢ç«¯åªæœ‰IEä¸æ”¯æŒ :has() äº† -->'
  Line 21: DELETED -> '<div class="post-header" :class="{ 'has-cover': image, 'text-revert': cover_revert }">'
  Line 21: ADDED -> '<div class="post-header" :class="{ 'has-cover': image, 'text-revert': meta?.coverRevert }">'
  Line 22/22: CONTEXT -> '<NuxtImg v-if="image" class="post-cover" :src="image" :alt="title" />'
  Line 23/23: CONTEXT -> '<div class="post-nav">'
  Line 24/24: CONTEXT -> '<div class="operations">'
  --- Diff Hunk: @@ -30,7 +30,7 @@ const { copy, copied } = useCopy(shareText) ---
  Line 30/30: CONTEXT -> '</ZButton>'
  Line 31/31: CONTEXT -> '</div>'
  Line 32/32: CONTEXT -> ''
  Line 33: DELETED -> '<div v-if="!hideInfo" class="post-info">'
  Line 33: ADDED -> '<div v-if="!meta?.hideInfo" class="post-info">'
  Line 34/34: CONTEXT -> '<time'
  Line 35/35: CONTEXT -> 'v-if="date"'
  Line 36/36: CONTEXT -> 'v-tip="`åˆ›å»ºäº ${getLocaleDatetime(props.date)}`"'

================================================================================

File 4/14: app/pages/preview.vue (Status: modified)
---------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -16,7 +16,7 @@ const { category, categories, listCategorized } = useCategory(listSorted) ---
  Line 16/16: CONTEXT -> '<div class="preview">'
  Line 17/17: CONTEXT -> '<div class="preview-header">'
  Line 18/18: CONTEXT -> '<h1>'
  Line 19: DELETED -> '<ZRawLink class="mobile-only" to="/">'
  Line 19: ADDED -> '<ZRawLink class="mobile-only" to="/" title="è¿”å›é¦–é¡µ">'
  Line 20/20: CONTEXT -> '<Icon name="ph:caret-left-bold" />'
  Line 21/21: CONTEXT -> '</ZRawLink>é¢„è§ˆ'
  Line 22/22: CONTEXT -> '</h1>'

================================================================================

File 5/14: app/stores/shiki.ts (Status: modified)
-------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -72,7 +72,8 @@ export const useShikiStore = defineStore('shiki', () => { ---
  Line 72/72: CONTEXT -> '}'
  Line 73/73: CONTEXT -> ''
  Line 74/74: CONTEXT -> 'async function loadLang(...langs: string[]) {'
  Line 75: DELETED -> 'const { bundledLanguages } = await import('shiki/langs')'
  Line 75: ADDED -> '// @ts-expect-error CDN åŠ¨æ€å¼•å…¥çš„åŒ…æ— ç±»å‹'
  Line 76: ADDED -> 'const { bundledLanguages } = await import('https://esm.sh/shiki/langs') as typeof import('shiki/langs')'
  Line 76/77: CONTEXT -> 'const loadedLangs = shiki.getLoadedLanguages()'
  Line 77/78: CONTEXT -> ''
  Line 78/79: CONTEXT -> 'await Promise.all(langs'

================================================================================

File 6/14: app/types/article.ts (Status: modified)
--------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -1,5 +1,6 @@ ---
  Line 1/1: CONTEXT -> 'import type { ReadTimeResults } from 'reading-time''
  Line 2/2: CONTEXT -> ''
  Line 3: ADDED -> '// TODO ä½¿ç”¨contentç±»å‹ï¼Œå¹²æ‰è¿™ä¸ªæ–‡ä»¶'
  Line 3/4: CONTEXT -> 'const _appConfig = useAppConfig()'
  Line 4/5: CONTEXT -> ''
  Line 5/6: CONTEXT -> 'export type ArticleOrderType = keyof typeof _appConfig.article.order'
  --- Diff Hunk: @@ -18,8 +19,11 @@ export default interface ArticleProps extends Partial<{ ---
  Line 18/19: CONTEXT -> 'tags: string[]'
  Line 19/20: CONTEXT -> 'type: 'tech' | 'story''
  Line 20/21: CONTEXT -> 'image: string'
  Line 21: DELETED -> 'cover_revert: boolean'
  Line 22: DELETED -> 'hideInfo: boolean'
  Line 23/22: CONTEXT -> 'recommend: number'
  Line 24/23: CONTEXT -> 'references: { title?: string, link?: string }[]'
  Line 24: ADDED -> ''
  Line 25: ADDED -> 'meta: {'
  Line 26: ADDED -> 'coverRevert: boolean'
  Line 27: ADDED -> 'hideInfo?: boolean'
  Line 28: ADDED -> '}'
  Line 25/29: CONTEXT -> '}> { }'

================================================================================

File 7/14: blog.config.ts (Status: modified)
--------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -1,6 +1,4 @@ ---
  Line 1: DELETED -> 'import type { NitroConfig } from 'nitropack''
  Line 2/1: CONTEXT -> 'import type { FeedEntry } from './app/types/feed''
  Line 3: DELETED -> 'import redirectList from './redirects.json''
  Line 4/2: CONTEXT -> ''
  Line 5/3: CONTEXT -> 'export { zhCN as dateLocale } from 'date-fns/locale/zh-CN''
  Line 6/4: CONTEXT -> ''
  --- Diff Hunk: @@ -28,24 +26,25 @@ const blogConfig = { ---
  Line 28/26: CONTEXT -> 'timezone: 'Asia/Shanghai','
  Line 29/27: CONTEXT -> 'url: 'https://blog.zhilu.site/','
  Line 30/28: CONTEXT -> ''
  Line 31: DELETED -> 'defaultCategory: ['æœªåˆ†ç±»'],'
  Line 29: ADDED -> 'content: {'
  Line 30: ADDED -> 'defaultCategory: 'æœªåˆ†ç±»','
  Line 31: ADDED -> '/** ä½¿ç”¨ pnpm new æ–°å»ºæ–‡ç« æ—¶è‡ªåŠ¨ç”Ÿæˆè‡ªå®šä¹‰é“¾æ¥ï¼ˆpermalink/abbrlinkï¼‰ */'
  Line 32: ADDED -> 'randomPathAtNew: false,'
  Line 33: ADDED -> '/** éšè—åŸºäºæ–‡ä»¶è·¯ç”±ï¼ˆä¸æ˜¯è‡ªå®šä¹‰é“¾æ¥ï¼‰çš„ URL /post è·¯å¾„å‰ç¼€ */'
  Line 34: ADDED -> 'hidePostPrefix: true,'
  Line 35: ADDED -> '/** ç¦æ­¢æœç´¢å¼•æ“æ”¶å½•çš„è·¯å¾„ */'
  Line 36: ADDED -> 'robotsNotIndex: ['/preview', '/previews/*'],'
  Line 37: ADDED -> '},'
  Line 32/38: CONTEXT -> ''
  Line 39: ADDED -> '/** åšå®¢ Atom è®¢é˜…æº */'
  Line 33/40: CONTEXT -> 'feed: {'
  Line 41: ADDED -> '/** è®¢é˜…æºæœ€å¤§æ–‡ç« æ•°é‡ */'
  Line 34/42: CONTEXT -> 'limit: 50,'
  Line 43: ADDED -> '/** è®¢é˜…æºæ˜¯å¦å¯ç”¨XSLTæ ·å¼ */'
  Line 44: ADDED -> 'enableStyle: true,'
  Line 35/45: CONTEXT -> '},'
  Line 36/46: CONTEXT -> ''
  Line 37: DELETED -> '// åœ¨ URL ä¸­éšè—çš„è·¯å¾„å‰ç¼€'
  Line 38: DELETED -> 'hideContentPrefixes: ['/posts'],'
  Line 39: DELETED -> ''
  Line 40: DELETED -> 'imageDomains: ['
  Line 41: DELETED -> '// è‡ªåŠ¨å¯ç”¨æœ¬åŸŸåçš„ Nuxt Image'
  Line 42: DELETED -> '// 'www.zhilu.site','
  Line 43: DELETED -> '// '7.isyangs.cn','
  Line 44: DELETED -> '],'
  Line 45: DELETED -> ''
  Line 46: DELETED -> '// ç¦æ­¢æœç´¢å¼•æ“æ”¶å½•çš„è·¯å¾„'
  Line 47: DELETED -> 'robotsNotIndex: ['/preview', '/previews/*'],'
  Line 48: DELETED -> ''
  Line 47: ADDED -> '/** å‘ <head> ä¸­æ·»åŠ è„šæœ¬ */'
  Line 49/48: CONTEXT -> 'scripts: ['
  Line 50/49: CONTEXT -> '// è‡ªå·±éƒ¨ç½²çš„ Umami ç»Ÿè®¡æœåŠ¡'
  Line 51/50: CONTEXT -> '{ 'src': 'https://zhi.zhilu.cyou/zhi.js', 'data-website-id': 'a1997c81-a42b-46f6-8d1d-8fbd67a8ef41', 'defer': true },'
  --- Diff Hunk: @@ -55,15 +54,15 @@ const blogConfig = { ---
  Line 55/54: CONTEXT -> '{ src: 'https://lib.baomitu.com/twikoo/1.6.44/twikoo.min.js', defer: true },'
  Line 56/55: CONTEXT -> '],'
  Line 57/56: CONTEXT -> ''
  Line 58: DELETED -> '// è‡ªå·±éƒ¨ç½²çš„ Twikoo æœåŠ¡'
  Line 57: ADDED -> '/** è‡ªå·±éƒ¨ç½²çš„ Twikoo æœåŠ¡ */'
  Line 59/58: CONTEXT -> 'twikoo: {'
  Line 60/59: CONTEXT -> 'envId: 'https://twikoo.zhilu.cyou/','
  Line 61/60: CONTEXT -> 'preload: 'https://twikoo.zhilu.cyou/','
  Line 62/61: CONTEXT -> '},'
  Line 63/62: CONTEXT -> '}'
  Line 64/63: CONTEXT -> ''
  Line 65: DELETED -> '// ç”¨äºç”Ÿæˆ OPML å’Œå‹é“¾é¡µé¢é…ç½®'
  Line 66: DELETED -> 'export const myFeed = <FeedEntry>{'
  Line 64: ADDED -> '/** ç”¨äºç”Ÿæˆ OPML å’Œå‹é“¾é¡µé¢é…ç½® */'
  Line 65: ADDED -> 'export const myFeed: FeedEntry = {'
  Line 67/66: CONTEXT -> 'author: blogConfig.author.name,'
  Line 68/67: CONTEXT -> 'sitenick: 'æ‘¸é±¼å¤„','
  Line 69/68: CONTEXT -> 'title: blogConfig.title,'
  --- Diff Hunk: @@ -77,22 +76,4 @@ export const myFeed = <FeedEntry>{ ---
  Line 77/76: CONTEXT -> 'comment: 'è¿™æ˜¯æˆ‘è‡ªå·±','
  Line 78/77: CONTEXT -> '}'
  Line 79/78: CONTEXT -> ''
  Line 80: DELETED -> '// å°†æ—§é¡µé¢æ°¸ä¹…é‡å®šå‘åˆ°æ–°é¡µé¢'
  Line 81: DELETED -> 'const redirectRouteRules = Object.entries(redirectList)'
  Line 82: DELETED -> '.reduce<NitroConfig['routeRules']>((acc, [from, to]) => {'
  Line 83: DELETED -> 'acc![from] = { redirect: { to, statusCode: 301 } }'
  Line 84: DELETED -> 'return acc'
  Line 85: DELETED -> '}, {})'
  Line 86: DELETED -> ''
  Line 87: DELETED -> '// https://nitro.build/config#routerules'
  Line 88: DELETED -> '// ä½¿ç”¨ EdgeOne éƒ¨ç½²æ—¶ï¼Œéœ€è¦åŒæ­¥æ›´æ–° edgeone.json'
  Line 89: DELETED -> '// @keep-sorted'
  Line 90: DELETED -> 'export const routeRules = <NitroConfig['routeRules']>{'
  Line 91: DELETED -> '...redirectRouteRules,'
  Line 92: DELETED -> ''/api/stats': { prerender: true, headers: { 'Content-Type': 'application/json' } },'
  Line 93: DELETED -> ''/atom.xml': { prerender: true, headers: { 'Content-Type': 'application/xml' } },'
  Line 94: DELETED -> ''/favicon.ico': { redirect: { to: blogConfig.favicon } },'
  Line 95: DELETED -> ''/zhilu.opml': { prerender: true, headers: { 'Content-Type': 'application/xml' } },'
  Line 96: DELETED -> '}'
  Line 97: DELETED -> ''
  Line 98/79: CONTEXT -> 'export default blogConfig'

================================================================================

File 8/14: content.config.ts (Status: modified)
-----------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -1,33 +1,36 @@ ---
  Line 1/1: CONTEXT -> 'import { defineCollection, z } from '@nuxt/content''
  Line 2/2: CONTEXT -> 'import blogConfig from './blog.config''
  Line 3/3: CONTEXT -> ''
  Line 4: ADDED -> 'const articleSchema = z.object({'
  Line 5: ADDED -> 'title: z.string(),'
  Line 6: ADDED -> 'description: z.string().optional(),'
  Line 7: ADDED -> 'date: z.string().optional(),'
  Line 8: ADDED -> 'updated: z.string().optional(),'
  Line 9: ADDED -> 'categories: z.array(z.string()).default([blogConfig.content.defaultCategory]),'
  Line 10: ADDED -> 'tags: z.array(z.string()).default([]),'
  Line 11: ADDED -> 'type: z.enum(['tech', 'story']).optional(),'
  Line 12: ADDED -> ''
  Line 13: ADDED -> 'image: z.string().optional(),'
  Line 14: ADDED -> 'recommend: z.number().optional(),'
  Line 15: ADDED -> 'references: z.array(z.object({'
  Line 16: ADDED -> 'title: z.string().optional(),'
  Line 17: ADDED -> 'link: z.string().optional(),'
  Line 18: ADDED -> '})).optional(),'
  Line 19: ADDED -> 'draft: z.boolean().default(false),'
  Line 20: ADDED -> 'url: z.string().optional(),'
  Line 21: ADDED -> ''
  Line 22: ADDED -> 'readingTime: z.object({'
  Line 23: ADDED -> 'text: z.string(),'
  Line 24: ADDED -> 'minutes: z.number(),'
  Line 25: ADDED -> 'time: z.number(),'
  Line 26: ADDED -> 'words: z.number(),'
  Line 27: ADDED -> '}),'
  Line 28: ADDED -> '})'
  Line 29: ADDED -> ''
  Line 4/30: CONTEXT -> 'export const collections = {'
  Line 5/31: CONTEXT -> 'content: defineCollection({'
  Line 6/32: CONTEXT -> 'source: '**','
  Line 7/33: CONTEXT -> 'type: 'page','
  Line 8: DELETED -> 'schema: z.object({'
  Line 9: DELETED -> 'title: z.string(),'
  Line 10: DELETED -> 'description: z.string().optional(),'
  Line 11: DELETED -> 'date: z.string().optional(),'
  Line 12: DELETED -> 'updated: z.string().optional(),'
  Line 13: DELETED -> 'categories: z.array(z.string()).default(blogConfig.defaultCategory),'
  Line 14: DELETED -> 'tags: z.array(z.string()),'
  Line 15: DELETED -> 'type: z.enum(['tech', 'story']).optional(),'
  Line 16: DELETED -> ''
  Line 17: DELETED -> 'image: z.string().optional(),'
  Line 18: DELETED -> 'recommend: z.number().optional(),'
  Line 19: DELETED -> 'references: z.array(z.object({'
  Line 20: DELETED -> 'title: z.string().optional(),'
  Line 21: DELETED -> 'link: z.string().optional(),'
  Line 22: DELETED -> '})).optional(),'
  Line 23: DELETED -> 'draft: z.boolean().default(false),'
  Line 24: DELETED -> ''
  Line 25: DELETED -> 'readingTime: z.object({'
  Line 26: DELETED -> 'text: z.string(),'
  Line 27: DELETED -> 'minutes: z.number(),'
  Line 28: DELETED -> 'time: z.number(),'
  Line 29: DELETED -> 'words: z.number(),'
  Line 30: DELETED -> '}).optional(),'
  Line 31: DELETED -> '}),'
  Line 34: ADDED -> 'schema: articleSchema,'
  Line 32/35: CONTEXT -> '}),'
  Line 33/36: CONTEXT -> '}'

================================================================================

File 9/14: nuxt.config.ts (Status: modified)
--------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -1,7 +1,9 @@ ---
  Line 1: ADDED -> 'import type { NitroConfig } from 'nitropack''
  Line 1/2: CONTEXT -> 'import process from 'node:process''
  Line 2/3: CONTEXT -> 'import ci from 'ci-info''
  Line 3: DELETED -> 'import blogConfig, { routeRules } from './blog.config''
  Line 4: ADDED -> 'import blogConfig from './blog.config''
  Line 4/5: CONTEXT -> 'import packageJson from './package.json''
  Line 6: ADDED -> 'import redirectList from './redirects.json''
  Line 5/7: CONTEXT -> ''
  Line 6/8: CONTEXT -> '// æ­¤å¤„é…ç½®æ— éœ€ä¿®æ”¹'
  Line 7/9: CONTEXT -> 'export default defineNuxtConfig({'
  --- Diff Hunk: @@ -55,7 +57,18 @@ export default defineNuxtConfig({ ---
  Line 55/57: CONTEXT -> 'inlineStyles: false,'
  Line 56/58: CONTEXT -> '},'
  Line 57/59: CONTEXT -> ''
  Line 58: DELETED -> 'routeRules,'
  Line 60: ADDED -> '// @keep-sorted'
  Line 61: ADDED -> 'routeRules: {'
  Line 62: ADDED -> '...Object.entries(redirectList)'
  Line 63: ADDED -> '.reduce<NitroConfig['routeRules']>((acc, [from, to]) => {'
  Line 64: ADDED -> 'acc![from] = { redirect: { to, statusCode: 308 } }'
  Line 65: ADDED -> 'return acc'
  Line 66: ADDED -> '}, {}),'
  Line 67: ADDED -> ''/api/stats': { prerender: true, headers: { 'Content-Type': 'application/json' } },'
  Line 68: ADDED -> ''/atom.xml': { prerender: true, headers: { 'Content-Type': 'application/xml' } },'
  Line 69: ADDED -> ''/favicon.ico': { redirect: { to: blogConfig.favicon } },'
  Line 70: ADDED -> ''/zhilu.opml': { prerender: true, headers: { 'Content-Type': 'application/xml' } },'
  Line 71: ADDED -> '},'
  Line 59/72: CONTEXT -> ''
  Line 60/73: CONTEXT -> 'runtimeConfig: {'
  Line 61/74: CONTEXT -> 'public: {'
  --- Diff Hunk: @@ -125,13 +138,15 @@ ${packageJson.homepage} ---
  Line 125/138: CONTEXT -> '`)'
  Line 126/139: CONTEXT -> '},'
  Line 127/140: CONTEXT -> ''content:file:afterParse': (ctx) => {'
  Line 128: DELETED -> '// åœ¨ URL ä¸­éšè—æŒ‡å®šç›®å½•å‰ç¼€çš„è·¯å¾„'
  Line 129: DELETED -> 'for (const prefix of blogConfig.hideContentPrefixes) {'
  Line 141: ADDED -> 'const permalink = ctx.content.permalink as string'
  Line 142: ADDED -> 'if (permalink) {'
  Line 143: ADDED -> 'ctx.content.path = permalink'
  Line 144: ADDED -> 'return'
  Line 145: ADDED -> '}'
  Line 146: ADDED -> '// åœ¨ URL ä¸­éšè—æ–‡ä»¶è·¯ç”±è‡ªåŠ¨ç”Ÿæˆçš„ /posts è·¯å¾„å‰ç¼€'
  Line 147: ADDED -> 'if (blogConfig.content.hidePostPrefix) {'
  Line 130/148: CONTEXT -> 'const realPath = ctx.content.path as string'
  Line 131: DELETED -> 'if (realPath.startsWith(prefix)) {'
  Line 132: DELETED -> 'ctx.content.original_dir = prefix'
  Line 133: DELETED -> 'ctx.content.path = realPath.replace(prefix, '')'
  Line 134: DELETED -> '}'
  Line 149: ADDED -> 'ctx.content.path = realPath.replace(/^\/posts/, '')'
  Line 135/150: CONTEXT -> '}'
  Line 136/151: CONTEXT -> '},'
  Line 137/152: CONTEXT -> '},'
  --- Diff Hunk: @@ -145,13 +160,21 @@ ${packageJson.homepage} ---
  Line 145/160: CONTEXT -> 'image: {'
  Line 146/161: CONTEXT -> '// Netlify éœ€è¦ç‰¹æ®Šå¤„ç†'
  Line 147/162: CONTEXT -> 'provider: process.env.NUXT_IMAGE_PROVIDER,'
  Line 148: DELETED -> 'domains: blogConfig.imageDomains,'
  Line 149/163: CONTEXT -> 'format: ['avif', 'webp'],'
  Line 150/164: CONTEXT -> '},'
  Line 151/165: CONTEXT -> ''
  Line 166: ADDED -> 'linkChecker: {'
  Line 167: ADDED -> '// @keep-sorted'
  Line 168: ADDED -> 'skipInspections: ['
  Line 169: ADDED -> ''no-baseless','
  Line 170: ADDED -> ''no-non-ascii-chars','
  Line 171: ADDED -> ''no-uppercase-chars','
  Line 172: ADDED -> '],'
  Line 173: ADDED -> '},'
  Line 174: ADDED -> ''
  Line 152/175: CONTEXT -> 'robots: {'
  Line 153/176: CONTEXT -> 'disableNuxtContentIntegration: true,'
  Line 154: DELETED -> 'disallow: blogConfig.robotsNotIndex,'
  Line 177: ADDED -> 'disallow: blogConfig.content.robotsNotIndex,'
  Line 155/178: CONTEXT -> '},'
  Line 156/179: CONTEXT -> ''
  Line 157/180: CONTEXT -> 'site: {'

================================================================================

File 10/14: package.json (Status: modified)
-------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -1,7 +1,7 @@ ---
  Line 1/1: CONTEXT -> '{'
  Line 2/2: CONTEXT -> '"name": "zhilu-blog",'
  Line 3/3: CONTEXT -> '"type": "module",'
  Line 4: DELETED -> '"version": "3.4.0",'
  Line 4: ADDED -> '"version": "3.4.1",'
  Line 5/5: CONTEXT -> '"private": true,'
  Line 6/6: CONTEXT -> '"packageManager": "pnpm@10.15.0",'
  Line 7/7: CONTEXT -> '"homepage": "https://github.com/L33Z22L11/blog-v3",'
  --- Diff Hunk: @@ -14,7 +14,7 @@ ---
  Line 14/14: CONTEXT -> '"preview": "nuxt preview",'
  Line 15/15: CONTEXT -> '"lint": "stylelint '**/*.{vue,scss}'",'
  Line 16/16: CONTEXT -> '"lint:fix": "eslint --fix && stylelint '**/*.{vue,scss}' --fix",'
  Line 17: DELETED -> '"new": "node scripts/new-blog.js"'
  Line 17: ADDED -> '"new": "node scripts/new-blog.ts"'
  Line 18/18: CONTEXT -> '},'
  Line 19/19: CONTEXT -> '"dependencies": {'
  Line 20/20: CONTEXT -> '"better-sqlite3": "catalog:content",'
  --- Diff Hunk: @@ -26,6 +26,7 @@ ---
  Line 26/26: CONTEXT -> '"embla-carousel-wheel-gestures": "catalog:ui",'
  Line 27/27: CONTEXT -> '"fast-xml-parser": "catalog:util",'
  Line 28/28: CONTEXT -> '"minisearch": "catalog:util",'
  Line 29: ADDED -> '"nanoid": "catalog:util",'
  Line 29/30: CONTEXT -> '"parse-domain": "catalog:util",'
  Line 30/31: CONTEXT -> '"plain-shiki": "catalog:content",'
  Line 31/32: CONTEXT -> '"radash": "catalog:util",'
  --- Diff Hunk: @@ -58,7 +59,7 @@ ---
  Line 58/59: CONTEXT -> '"sass-embedded": "catalog:framework",'
  Line 59/60: CONTEXT -> '"shiki": "catalog:content",'
  Line 60/61: CONTEXT -> '"stylelint": "catalog:quality",'
  Line 61: DELETED -> '"terser": "catalog:framework",'
  Line 62: ADDED -> '"terser": "catalog:util",'
  Line 62/63: CONTEXT -> '"typescript": "catalog:framework",'
  Line 63/64: CONTEXT -> '"vue": "catalog:framework",'
  Line 64/65: CONTEXT -> '"vue-router": "catalog:framework"'

================================================================================

File 11/14: pnpm-workspace.yaml (Status: modified)
--------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -2,23 +2,22 @@ catalogs: ---
  Line 2/2: CONTEXT -> 'content:'
  Line 3/3: CONTEXT -> ''@nuxt/content': ^3.6.3'
  Line 4/4: CONTEXT -> ''@nuxtjs/seo': ^3.1.0'
  Line 5: DELETED -> ''@shikijs/colorized-brackets': ^3.11.0'
  Line 6: DELETED -> ''@shikijs/transformers': ^3.11.0'
  Line 5: ADDED -> ''@shikijs/colorized-brackets': ^3.12.0'
  Line 6: ADDED -> ''@shikijs/transformers': ^3.12.0'
  Line 7/7: CONTEXT -> 'better-sqlite3: ^12.2.0'
  Line 8/8: CONTEXT -> 'plain-shiki: ^0.3.0'
  Line 9/9: CONTEXT -> 'rehype-katex: ^7.0.1'
  Line 10/10: CONTEXT -> 'remark-math: ^6.0.0'
  Line 11/11: CONTEXT -> 'remark-reading-time: ^2.0.2'
  Line 12: DELETED -> 'shiki: ^3.11.0'
  Line 12: ADDED -> 'shiki: ^3.12.0'
  Line 13/13: CONTEXT -> 'framework:'
  Line 14/14: CONTEXT -> 'ci-info: ^4.3.0'
  Line 15/15: CONTEXT -> 'cross-env: ^10.0.0'
  Line 16/16: CONTEXT -> 'nuxt: ^4.0.3'
  Line 17: DELETED -> 'sass-embedded: ^1.90.0'
  Line 18: DELETED -> 'terser: ^5.43.1'
  Line 17: ADDED -> 'sass-embedded: ^1.91.0'
  Line 19/18: CONTEXT -> 'typescript: ^5.9.2'
  Line 20: DELETED -> 'unplugin-yaml: ^3.0.4'
  Line 21: DELETED -> 'vue: ^3.5.19'
  Line 19: ADDED -> 'unplugin-yaml: ^3.0.5'
  Line 20: ADDED -> 'vue: ^3.5.20'
  Line 22/21: CONTEXT -> 'vue-router: ^4.5.1'
  Line 23/22: CONTEXT -> 'quality:'
  Line 24/23: CONTEXT -> ''@antfu/eslint-config': ^5.2.1'
  --- Diff Hunk: @@ -38,15 +37,17 @@ catalogs: ---
  Line 38/37: CONTEXT -> 'vue-virtual-scroller: 2.0.0-beta.8'
  Line 39/38: CONTEXT -> 'util:'
  Line 40/39: CONTEXT -> ''@pinia/nuxt': ^0.11.2'
  Line 41: DELETED -> ''@vueuse/core': ^13.7.0'
  Line 42: DELETED -> ''@vueuse/nuxt': ^13.7.0'
  Line 43: DELETED -> ''@vueuse/router': ^13.7.0'
  Line 40: ADDED -> ''@vueuse/core': ^13.8.0'
  Line 41: ADDED -> ''@vueuse/nuxt': ^13.8.0'
  Line 42: ADDED -> ''@vueuse/router': ^13.8.0'
  Line 44/43: CONTEXT -> 'date-fns: ^4.1.0'
  Line 45/44: CONTEXT -> 'date-fns-tz: ^3.2.0'
  Line 46/45: CONTEXT -> 'fast-xml-parser: ^5.2.5'
  Line 47/46: CONTEXT -> 'minisearch: ^7.1.2'
  Line 47: ADDED -> 'nanoid: ^5.1.5'
  Line 48/48: CONTEXT -> 'parse-domain: ^8.2.2'
  Line 49/49: CONTEXT -> 'radash: ^12.1.1'
  Line 50: ADDED -> 'terser: ^5.43.1'
  Line 50/51: CONTEXT -> ''
  Line 51/52: CONTEXT -> 'onlyBuiltDependencies:'
  Line 52/53: CONTEXT -> '- '@parcel/watcher''

================================================================================

File 12/14: scripts/new-blog.ts (Status: renamed)
-------------------------------------------------
  This file was renamed from 'scripts/new-blog.js'.
  --- Diff Hunk: @@ -2,6 +2,8 @@ import { exec } from 'node:child_process' ---
  Line 2/2: CONTEXT -> 'import fs from 'node:fs''
  Line 3/3: CONTEXT -> 'import path from 'node:path''
  Line 4/4: CONTEXT -> 'import process from 'node:process''
  Line 5: ADDED -> 'import { customAlphabet } from 'nanoid''
  Line 6: ADDED -> 'import blogConfig from '../blog.config.ts''
  Line 5/7: CONTEXT -> ''
  Line 6/8: CONTEXT -> '// è·å–å½“å‰è·¯å¾„å’Œå‚æ•°'
  Line 7/9: CONTEXT -> 'const args = process.argv.slice(2)'
  --- Diff Hunk: @@ -13,7 +15,8 @@ if (!blogTitle) { ---
  Line 13/15: CONTEXT -> '}'
  Line 14/16: CONTEXT -> ''
  Line 15/17: CONTEXT -> '// è·å–å½“å‰å¹´ä»½'
  Line 16: DELETED -> 'const year = new Date().getFullYear()'
  Line 18: ADDED -> 'const now = new Date()'
  Line 19: ADDED -> 'const year = now.getFullYear()'
  Line 17/20: CONTEXT -> 'const directory = path.join(process.cwd(), 'content', 'posts', year.toString())'
  Line 18/21: CONTEXT -> ''
  Line 19/22: CONTEXT -> '// ç¡®ä¿ç›®å½•å­˜åœ¨'
  --- Diff Hunk: @@ -28,18 +31,34 @@ if (fs.existsSync(filePath)) { ---
  Line 28/31: CONTEXT -> 'process.exit(1)'
  Line 29/32: CONTEXT -> '}'
  Line 30/33: CONTEXT -> ''
  Line 34: ADDED -> 'let permalink: string | undefined'
  Line 35: ADDED -> 'if (blogConfig.content.randomPathAtNew) {'
  Line 36: ADDED -> 'const hash = customAlphabet('0123456789abcdef', 7)()'
  Line 37: ADDED -> 'permalink = `/posts/${hash}`'
  Line 38: ADDED -> '}'
  Line 39: ADDED -> ''
  Line 40: ADDED -> 'const frontmatter = {'
  Line 41: ADDED -> 'title: blogTitle,'
  Line 42: ADDED -> 'description: blogTitle,'
  Line 43: ADDED -> 'date: `${now.toLocaleDateString('en-CA')} ${now.toLocaleTimeString()}`,'
  Line 44: ADDED -> 'updated: `${now.toLocaleDateString('en-CA')} ${now.toLocaleTimeString()}`,'
  Line 45: ADDED -> 'image: '# å›¾ç‰‡','
  Line 46: ADDED -> 'permalink,'
  Line 47: ADDED -> 'type: '# story','
  Line 48: ADDED -> 'categories: '[åˆ†ç±»]','
  Line 49: ADDED -> 'tags: '[æ ‡ç­¾1, æ ‡ç­¾2]','
  Line 50: ADDED -> '}'
  Line 51: ADDED -> ''
  Line 31/52: CONTEXT -> '// åˆ›å»º Markdown æ–‡ä»¶'
  Line 32: DELETED -> 'fs.writeFileSync(filePath, `---'
  Line 33: DELETED -> 'title: ${blogTitle}'
  Line 34: DELETED -> 'description: ${blogTitle}'
  Line 35: DELETED -> 'date: ${new Date().toLocaleDateString('en-CA')} ${new Date().toLocaleTimeString()}'
  Line 36: DELETED -> 'updated: ${new Date().toLocaleDateString('en-CA')} ${new Date().toLocaleTimeString()}'
  Line 37: DELETED -> '# image:'
  Line 38: DELETED -> '# type: story'
  Line 39: DELETED -> 'categories: [åˆ†ç±»]'
  Line 40: DELETED -> 'tags: [æ ‡ç­¾1, æ ‡ç­¾2]'
  Line 53: ADDED -> 'fs.writeFileSync(filePath, `---\n${Object.entries(frontmatter)'
  Line 54: ADDED -> '.filter(([, value]) => value !== undefined)'
  Line 55: ADDED -> '.map(([key, value]) => `${key}: ${value}`)'
  Line 56: ADDED -> '.join('\n')}'
  Line 41/57: CONTEXT -> '---'
  Line 42: DELETED -> '\n\n`, 'utf8')'
  Line 58: ADDED -> ''
  Line 59: ADDED -> '## ${blogTitle}çš„ç¬¬ä¸€ä¸ªå°æ ‡é¢˜'
  Line 60: ADDED -> ''
  Line 61: ADDED -> '`, 'utf8')'
  Line 43/62: CONTEXT -> ''
  Line 44/63: CONTEXT -> '// ä½¿ç”¨ VS Code æ‰“å¼€æ–‡ä»¶'
  Line 45/64: CONTEXT -> 'exec(`code "${filePath}"`, (error) => {'

================================================================================

File 13/14: server/api/stats.get.ts (Status: modified)
------------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -17,6 +17,8 @@ export default defineEventHandler(async (event) => { ---
  Line 17/17: CONTEXT -> 'tags: <string[]>[],'
  Line 18/18: CONTEXT -> '}'
  Line 19/19: CONTEXT -> ''
  Line 20: ADDED -> 'const existedPath = new Map()'
  Line 21: ADDED -> ''
  Line 20/22: CONTEXT -> 'const posts = await queryCollection(event, 'content').all()'
  Line 21/23: CONTEXT -> ''
  Line 22/24: CONTEXT -> 'const findOrCreateCategory = ('
  --- Diff Hunk: @@ -32,20 +34,28 @@ export default defineEventHandler(async (event) => { ---
  Line 32/34: CONTEXT -> '}'
  Line 33/35: CONTEXT -> ''
  Line 34/36: CONTEXT -> 'for (const post of posts) {'
  Line 37: ADDED -> '// é‡å¤è·¯å¾„æ£€æµ‹'
  Line 38: ADDED -> 'if (existedPath.has(post.path))'
  Line 39: ADDED -> 'console.warn('æ–‡ç« å­˜åœ¨é‡å¤è·¯å¾„', post.path)'
  Line 40: ADDED -> 'existedPath.set(post.path, true)'
  Line 41: ADDED -> ''
  Line 42: ADDED -> '// æ–‡ç« /æ€»å­—æ•°è®¡æ•°'
  Line 35/43: CONTEXT -> 'stats.total.posts++'
  Line 36: DELETED -> 'stats.total.words += post.readingTime?.words || 0'
  Line 44: ADDED -> 'stats.total.words += post.readingTime.words'
  Line 37/45: CONTEXT -> ''
  Line 38/46: CONTEXT -> 'if (!post.date)'
  Line 39/47: CONTEXT -> 'continue'
  Line 40/48: CONTEXT -> ''
  Line 49: ADDED -> '// å¹´æ–‡ç« /å¹´å­—æ•°è®¡æ•°'
  Line 41/50: CONTEXT -> 'const year = new Date(post.date).getFullYear()'
  Line 42/51: CONTEXT -> 'if (!stats.annual[year]) {'
  Line 43/52: CONTEXT -> 'stats.annual[year] = { posts: 0, words: 0 }'
  Line 44/53: CONTEXT -> '}'
  Line 45/54: CONTEXT -> ''
  Line 46/55: CONTEXT -> 'stats.annual[year].posts++'
  Line 47: DELETED -> 'stats.annual[year].words += post.readingTime?.words'
  Line 56: ADDED -> 'stats.annual[year].words += post.readingTime.words'
  Line 48/57: CONTEXT -> ''
  Line 58: ADDED -> '// åˆ†ç±»æ–‡ç« è®¡æ•°'
  Line 49/59: CONTEXT -> 'const categories = post.categories || []'
  Line 50/60: CONTEXT -> 'let currentLevel = stats.categories'
  Line 51/61: CONTEXT -> ''
  --- Diff Hunk: @@ -63,6 +73,7 @@ export default defineEventHandler(async (event) => { ---
  Line 63/73: CONTEXT -> '}'
  Line 64/74: CONTEXT -> '}'
  Line 65/75: CONTEXT -> ''
  Line 76: ADDED -> '// æ ‡ç­¾ç»Ÿè®¡'
  Line 66/77: CONTEXT -> 'const tags = post.tags || []'
  Line 67/78: CONTEXT -> 'tags.filter((tag: any): tag is string => typeof tag === 'string')'
  Line 68/79: CONTEXT -> '.forEach((tag: string) => {'

================================================================================

File 14/14: server/routes/atom.xml.get.ts (Status: modified)
------------------------------------------------------------
  This file was modified:
  --- Diff Hunk: @@ -78,7 +78,7 @@ export default defineEventHandler(async (event) => { ---
  Line 78/78: CONTEXT -> ''
  Line 79/79: CONTEXT -> 'return builder.build({'
  Line 80/80: CONTEXT -> ''?xml': { $version: '1.0', $encoding: 'UTF-8' },'
  Line 81: DELETED -> ''?xml-stylesheet': { $type: 'text/xsl', $href: '/assets/atom.xsl' },'
  Line 81: ADDED -> ''?xml-stylesheet': blogConfig.feed.enableStyle ? { $type: 'text/xsl', $href: '/assets/atom.xsl' } : undefined,'
  Line 82/82: CONTEXT -> 'feed,'
  Line 83/83: CONTEXT -> '})'
  Line 84/84: CONTEXT -> '})'

================================================================================

